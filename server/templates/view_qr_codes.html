<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes" />
<script src="https://www.kryogenix.org/code/browser/sorttable/sorttable.js"></script>
<script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>
<title>View QR Codes</title>

<head>
    <style>
        html {
            align-items: center;
            text-align: center;
            transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out, border-color 0.3s ease-in-out, border 0.3s ease-in-out, transform 0.3s ease-in-out;
        }

        .content {
            display: inline-block;
            text-align: center;
        }

        summary {
            font-size: 20px;
            text-align: center;
            padding-bottom: 5px;
            font-family: Arial, Helvetica, sans-serif;
        }

        p {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 26px;
            margin-bottom: 5px;
            text-align: center;
            font-size: 16px;
        }

        .qr-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
        }

        .qr-item {
            break-inside: avoid;
            flex: 0 1 48%;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin-bottom: 20px;
        }

        .qr-item img {
            border: 1px solid transparent;
            max-width: 100%;
            height: auto;
            transition: box-shadow 0.3s ease-in-out, color 0.3s ease-in-out, border-color 0.3s ease-in-out, border 0.3s ease-in-out, transform 0.3s ease-in-out;
            transform: scale(1);
        }

        .qr-item img:hover {
            transform: scale(1.05);
            border: 1px solid black;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.3), 0 6px 20px 0 rgba(0, 0, 0, 0.3);
        }

        @media print {
            details:not([open]) {
                display: none;
            }
        }
    </style>
</head>

<body>
    {% for category, sheets in sheet_data.items() %}
    <details class="category">
        <summary>{{ category }}</summary>
        <div class="qr-container">
            {% for sheet in sheets %}
            <div class="qr-item" data-name="{{ sheet }}">
                <div class="qr-code"></div>
                <p>{{ sheet }}</p>
            </div>
            {% endfor %}
        </div>
    </details>
    {% endfor %}
    <details class="category">
        <summary>Add Cut Off</summary>
        <div class="qr-container">
            <div class="qr-item" data-name="add_cutoff_sheet">
                <div class="qr-code"></div>
                <p>Add Cut Off</p>
            </div>
        </div>
    </details>
</body>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        baseUrl = "http://10.0.0.9:8080/sheets_in_inventory/";
        document.querySelectorAll('.qr-item').forEach(item => {
            const name = item.getAttribute('data-name');
            if (name == "add_cutoff_sheet") {
                baseUrl = "http://10.0.0.9:8080/";
                const encodedUrl = encodeURI(baseUrl + name.replace(/ /g, "_"));
                const qrDiv = item.querySelector('.qr-code');
                new QRCode(qrDiv, {
                    text: encodedUrl,
                    width: 1024,
                    height: 1024,
                    colorDark: "#000000",
                    colorLight: "#ffffff",
                    correctLevel: QRCode.CorrectLevel.H
                });
                qrDiv.style.cursor = 'pointer';
                qrDiv.addEventListener('click', function () {
                    window.open(encodedUrl, '_blank');
                });
            } else {
                const encodedUrl = encodeURI(baseUrl + name.replace(/ /g, "_"));
                const qrDiv = item.querySelector('.qr-code');
                new QRCode(qrDiv, {
                    text: encodedUrl,
                    width: 256,
                    height: 256,
                    colorDark: "#000000",
                    colorLight: "#ffffff",
                    correctLevel: QRCode.CorrectLevel.H
                });
                qrDiv.style.cursor = 'pointer';
                qrDiv.addEventListener('click', function () {
                    window.open(encodedUrl, '_blank');
                });
            }


        });
    });
</script>

</html>